"use strict";var app=angular.module("thePokerPound20App",["firebase","ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","luegg.directives","angular-progress-arc"]).constant("FIREBASE_URL","https://pokerpound.firebaseio.com/").config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",resolve:{user:["Auth",function(a){return a.resolveUser()}]}}).when("/register",{templateUrl:"views/register.html",controller:"AuthCtrl",resolve:{user:["Auth",function(a){return a.resolveUser()}]}}).when("/AngPoker",{templateUrl:"views/angpoker.html",controller:"AngPokerController",resolve:{user:["Auth",function(a){return a.resolveUser()}]}}).when("/pokerroom/:roomid",{templateUrl:"views/pokerroom.html",controller:"PokergameCtrl",resolve:{user:["Auth",function(a){return a.resolveUser()}]}}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location",function(a,b){a.$on("$routeChangeError",function(a,c,d,e){"AUTH_REQUIRED"===e&&b.path("/register")})}]);app.controller("MainCtrl",["$scope","Auth","FIREBASE_URL","$firebaseObject","$location",function(a,b,c,d,e){if(a.toggleModal=function(){a.modalShown=!a.modalShown},a.login=function(){b.login(a.user).then(function(){a.email=b.resolveUser().password.email,e.path("/AngPoker")},function(b){a.error=b.toString()})},a.register=function(){b.register(a.user).then(function(){return b.login(a.user).then(function(){e.path("/AngPoker"),console.log(a.authData)})},function(b){a.error=b.toString(),console.log(a.error)})},a.signedIn=b.signedIn,a.logout=b.logout,a.signedIn()&&(a.email=b.resolveUser().password.email),a.user=b.resolveUser(),a.user&&!a.user.profile){var f=new Firebase(c);a.user.profile=d(f.child("profile").child(a.user.uid))}a.usercheck=b.checkUser(),a.usercheck.$onAuth(function(){a.user=b.resolveUser()})}]),app.controller("PokergameCtrl",["$interval","$firebaseArray","$firebaseObject","$routeParams","FIREBASE_URL","$scope","$timeout","Auth","Table","user","$location",function(a,b,c,d,e,f,g,h,i,j,k){function l(){var a=f.table.game.actionOn,b=f.table.game.maxBet,c=f.table.game.maxBet-f.table.game.bets[a],d=f.table.players[a].playerName,e="fold",g=40;switch(0===c&&(e="check"),f.table.game.roundName){case"Deal":r(f.table.players[a].cards)&&(e=0===b?"raises":"call");break;case"Flop":(q(f.table.players[a].cards,f.table.game.board)||u(f.table.players[a].cards,f.table.game.board)||t(f.table.players[a].cards,f.table.game.board)||n(f.table.players[a].cards))&&(e=0===b?"raises":"call");break;case"Turn":(q(f.table.players[a].cards,f.table.game.board)||u(f.table.players[a].cards,f.table.game.board)||t(f.table.players[a].cards,f.table.game.board)||n(f.table.players[a].cards))&&(e=0===b?"raises":"call");break;case"River":(q(f.table.players[a].cards,f.table.game.board)||n(f.table.players[a].cards))&&(e=0===b?"raises":"call");break;case"Showdown":e="call"}switch(e){case"fold":f.table.players[a].Fold(f.table);break;case"call":f.table.players[a].Call(f.table);break;case"check":f.table.players[a].Call(f.table);break;case"raises":0===c||"Deal"===f.table.game.roundName&&b===f.table.bigBlind?f.table.players[a].Bet(g+b,f.table):f.table.players[a].Call(f.table)}return d+" "+e}function m(a){return[a+"S",a+"C",a+"H",a+"D"]}function n(a){return a[0][0]===a[1][0]}function o(a){return a.charAt(0)}function p(a,b){for(var c=0;c<b.length;c++){if(o(b[c])===o(a[0]))return!0;if(o(b[c])===o(a[1]))return!0}}function q(a,b){return p(a,b)}function r(a){for(var b=["A","K","Q","J","T","9","8"],c=[],d=0;d<b.length;d++)c=c.concat(m(b[d]));return-1!==c.indexOf(a[0])&&-1!==c.indexOf(a[1])?!0:n(a)?!0:!1}function s(a,b){return F.indexOf(a[0])-F.indexOf(b[0])}function t(a,b){for(var c=a.concat(b).sort(s),d=0,e=0,f=0,g=0,h=0;h<c.length;h++)"D"===c[h][1]?d++:"S"===c[h][1]?e++:"C"===c[h][1]?f++:g++;return d>3||e>3||f>3||g>3}function u(a,b){for(var c=a.concat(b).sort(s),d=0,e=1;e<c.length;e++)F.indexOf(c[e][0])-1===F.indexOf(c[e][0])?d++:3>d&&(d=0);return d>=3}var v=new Firebase(e+"/pokerrooms/"+d.roomid),w=new Firebase(e+"/pokerrooms/"+d.roomid+"/messages/");f.messages=b(w);var x=new Firebase(e),y=x.child("profile").child(j.uid),z=x.child("profile");f.userList=c(z),f.timeLimit=1;var A;j?(f.user=j,f.user.profile=c(y)):k.path("/register");var B=c(v);f.table=new i(10,20,2,10,100,1e3),B.$loaded().then(function(){f.roomMaster=B.createdBy,B.pokertable?(C(),B.$watch(C),f.roomMaster===j.profile.username&&D()):(v.child("pokertable").update(f.table),B.$watch(C),console.log(f.table))}),f.addMessage=function(a){if(13===a.keyCode&&f.msg){var b=j.profile.username;f.messages.$add({from:b,body:f.msg}),f.msg=""}};var C=function(){for(var a in B.pokertable)if("game"===a){for(var b in B.pokertable.game)f.table.game[b]=B.pokertable.game[b];void 0===B.pokertable.game.board&&f.table.game.board.splice(0,f.table.game.board.length)}else if("players"===a){var c;for(c in B.pokertable.players){B.pokertable.players[c]&&!f.table.players[c]&&f.table.AddPlayer(chance.name(),1e3,B.pokertable.players[c].seat,B.pokertable.players[c].user);for(var d in B.pokertable.players[c])f.table.players[c][d]=B.pokertable.players[c][d]}for(c in f.table.players)void 0===B.pokertable.players[c]&&f.table.RemovePlayer(f.table.players[c].seat)}else f.table[a]=B.pokertable[a];console.log(f.table)},D=function(){f.$watch("[table.game.actionOn,table.game.roundName]",function(b,c){void 0!==f.table.game.actionOn&&f.table.game.actionOn!==!1&&"bot"===f.table.players[f.table.game.actionOn].user&&"Showdown"!==f.table.game.roundName&&(console.log("bot "+f.table.players[f.table.game.actionOn].playerName+" turn"),g(function(){E(),a.cancel(A),f.timeLimit=1},1500)),void 0!==f.table.game.actionOn&&f.table.game.actionOn!==!1&&"bot"!==f.table.players[f.table.game.actionOn].user&&"Showdown"!==f.table.game.roundName&&g(function(){A=a(function(){f.timeLimit>0?f.timeLimit-=.01:f.fold(f.table.players[f.table.game.actionOn].seat)},100)},1500),c[1]!==b[1]&&(f.messages.$add({from:"",body:f.table.game.roundName}),"Showdown"===b[1]&&f.messages.$add({from:"",body:f.table.game.winners}))},!0)},E=function(){var a=l();f.messages.$add({from:"",body:a}),f.msg="",v.child("pokertable").update(angular.fromJson(angular.toJson(f.table)))};f.newHand=function(){for(var a=0;a<f.table.players.length;a++)f.table.players[a].cards[0]=void 0,f.table.players[a].cards[1]=void 0;f.table.game.board.splice(0,f.table.game.board.length),v.child("pokertable").update(angular.fromJson(angular.toJson(f.table))),g(function(){f.table.initNewRound(),v.child("pokertable").update(angular.fromJson(angular.toJson(f.table)))},1500)},f.call=function(b){a.cancel(A),f.timeLimit=1,f.table.players[f.table.seats[b]].Call(f.table),0===f.table.game.maxBet?(f.messages.$add({from:"",body:j.profile.username+" checks"}),f.msg=""):(f.messages.$add({from:"",body:j.profile.username+" calls"}),f.msg=""),v.child("pokertable").update(angular.fromJson(angular.toJson(f.table)))},f.raise=function(b){a.cancel(A),f.timeLimit=1,f.table.players[f.table.seats[b]].Bet(20,f.table),f.messages.$add({from:"",body:j.profile.username+" raises"}),f.msg="",v.child("pokertable").update(angular.fromJson(angular.toJson(f.table)))},f.fold=function(b){a.cancel(A),f.timeLimit=1,f.table.players[f.table.seats[b]].Fold(f.table),f.messages.$add({from:"",body:j.profile.username+" folds"}),f.msg="",v.child("pokertable").update(angular.fromJson(angular.toJson(f.table)))},f.addPlayer=function(a){f.table.AddPlayer(chance.name(),1e3,a,"bot"),v.child("pokertable").update(angular.fromJson(angular.toJson(f.table)))},f.removePlayer=function(a){f.table.RemovePlayer(a),v.child("pokertable").update(angular.fromJson(angular.toJson(f.table)))},f.startGame=function(){f.table.NewRound()&&(D(),v.child("pokertable").update(angular.fromJson(angular.toJson(f.table))))},f.sitDown=function(a){f.user.profile.sitting=!0,f.user.profile.seat=a,f.table.AddPlayer(f.user.profile.username,f.user.profile.balance,a,j.uid),f.user.profile.$save(),v.child("pokertable").update(angular.fromJson(angular.toJson(f.table)))},f.$on("$destroy",function(){f.removePlayer(f.user.profile.seat),f.user.profile.sitting=!1,f.user.profile.seat=-1,f.user.profile.$save(),console.log("BuBye!!!")});var F=["2","3","4","5","6","7","8","9","T","J","Q","K","A"]}]),app.controller("ChatController",["$scope","$firebaseArray",function(a,b){var c=new Firebase("https://pokerpound.firebaseio.com/messages");a.messages=b(c),a.addMessage=function(b){if(13===b.keyCode&&a.msg){var c=a.name||"anonymous";a.messages.$add({from:c,body:a.msg}),a.msg=""}}}]),app.controller("AngPokerController",["$firebaseArray","$firebaseObject","$location","FIREBASE_URL","$scope","Auth","user",function(a,b,c,d,e,f,g){var h=new Firebase(d+"/pokerrooms"),i=new Firebase(d);e.rooms=a(h),e.isEmailVisible=!1,e.isLeaderBoardVisible=!1,g?(e.user=g,e.user.profile=b(i.child("profile").child(g.uid))):c.path("/"),e.toggleEmailVisibility=function(){e.isEmailVisible=!e.isEmailVisible,e.isLeaderBoardVisible&&(e.isLeaderBoardVisible=!e.isLeaderBoardVisible)},e.toggleLeaderBoardVisibility=function(){e.isLeaderBoardVisible=!e.isLeaderBoardVisible,e.isEmailVisible&&(e.isEmailVisible=!e.isEmailVisible)},e.newRoom=function(){h.push({createdBy:e.user.profile.username,roomname:e.roomName,createddate:Date.now()}),e.isNew=!1,e.rooms=a(h)},e.deleteRoom=function(a){h.child(e.rooms[a].$id).remove(function(a){a?console.log("Error:",a):console.log("Profile removed successfully!")})},e.joinRoom=function(a){c.path("/pokerroom/"+e.rooms[a].$id)},e.signedIn=f.signedIn,e.logout=f.logout}]),app.controller("AuthCtrl",["$scope","Auth","$location",function(a,b,c){var d=b.resolveUser();d&&c.path("/AngPoker"),a.login=function(){b.login(a.user).then(function(){c.path("/AngPoker")},function(b){a.error=b.toString()+"Creating User Now.....",a.register(a.user)})},a.register=function(){b.register(a.user).then(function(){return b.login(a.user).then(function(c){return c.username=a.user.username,c.avatar=a.user.avatar,b.createProfile(c)}).then(function(){c.path("/AngPoker")})},function(b){a.error=b.toString()})},a.signedIn=b.signedIn,a.logout=b.logout}]),app.factory("Auth",["$firebaseObject","$firebaseAuth","FIREBASE_URL","$rootScope",function(a,b,c,d){var e=new Firebase(c),f=b(e),g={register:function(a){return a.email=a.username+"@"+a.username+".com",f.$createUser({email:a.email,password:a.password})},createProfile:function(a){var b={username:a.username,avatar:"assassin_avatar.png",balance:1e3,sitting:!1,seat:-1},d=new Firebase(c+"/profile/"+a.uid);return d.set(b)},signedIn:function(){return f.$getAuth()?!0:!1},login:function(a){return a.email=a.username+"@"+a.username+".com",f.$authWithPassword({email:a.email,password:a.password},function(){},{remember:"sessionOnly"}).then(function(a){return d.$broadcast("$firebaseAuth:authWithPassword",a),a})},logout:function(){f.$unauth(),d.$broadcast("$firebaseAuth:unauth")},resolveUser:function(){return f.$getAuth()},checkUser:function(){return f},user:{}};return d.$on("$firebaseAuth:authWithPassword",function(b,c){angular.copy(c,g.user),g.user.profile=a(e.child("profile").child(g.user.uid))}),d.$on("$firebaseAuth:unauth",function(){console.log("logged out"),g.user&&g.user.profile&&g.user.profile.$destroy(),angular.copy({},g.user)}),g}]),app.factory("Table",function(){function a(a,b,c,d,e,f){this.smallBlind=a,this.bigBlind=b,this.minPlayers=c,this.maxPlayers=d,this.players=[],this.dealer=0,this.minBuyIn=e,this.maxBuyIn=f,this.game=new j(this.smallBlind,this.bigBlind),this.seats=new Array(d);for(var g=0;d>g;g++)this.seats[g]=!1;var h;return 2>c?h=new Error(101,"Parameter [minPlayers] must be a postive integer of a minimum value of 2."):d>10?h=new Error(102,"Parameter [maxPlayers] must be a positive integer less than or equal to 10."):c>d&&(h=new Error(103,"Parameter [minPlayers] must be less than or equal to [maxPlayers].")),h?h:void 0}function b(a,b,c,d,e){this.playerName=a,this.chips=b,this.folded=!1,this.allIn=!1,this.talked=!1,this.cards=[],this.cardsFlippedUp=!1,this.seat=d,this.user=e}function c(a,b){var c,d;for(d=[],c=0;c<b.length;c+=1)a.players[b[c]].allIn===!0&&d.push(b[c]);return d}function d(a){var b,e,f,g,h,i,j,k,l,m,n;for(i=[],h=0,f=0;f<a.players.length;f+=1)a.players[f].hand.rank===h&&a.players[f].folded===!1&&i.push(f),a.players[f].hand.rank>h&&a.players[f].folded===!1&&(h=a.players[f].hand.rank,i.splice(0,i.length),i.push(f));if(j=0,k=0,l=c(a,i),l.length>0){for(m=a.game.roundBets[i[0]],e=1;e<l.length;e+=1)0!==a.game.roundBets[i[e]]&&a.game.roundBets[i[e]]<m&&(m=a.game.roundBets[i[e]]);j=parseInt(m,10)}else j=parseInt(a.game.roundBets[i[0]],10);for(g=0;g<a.game.roundBets.length;g+=1)a.game.roundBets[g]>j?(k+=j,a.game.roundBets[g]-=j):(k+=a.game.roundBets[g],a.game.roundBets[g]=0);for(b=0;b<i.length;b+=1)a.players[i[b]].chips+=k/i.length,0===a.game.roundBets[i[b]],a.game.winners+=" "+a.players[i[b]].playerName+" wins !!";for(a.game.winnersIndex=i,n=!0,g=0;g<a.game.roundBets.length;g+=1)0!==a.game.roundBets[g]&&(n=!1);n===!1&&d(a)}function e(a){var b;for(b=0;b<a.players.length;b+=1)0===a.players[b].chips&&(console.log("player "+a.players[b].playerName+" is going bankrupt"),a.players.splice(b,1))}function f(a){this.cards=a}function g(a){var b,c=0;for(b=0;b<a.game.bets.length;b+=1)a.game.bets[b]=0;for(b=0;b<a.players.length;b+=1)a.players[b].talked=!1;for(a.game.maxBet=0,a.game.actionEnd=a.dealer;a.players[a.game.actionEnd].folded===!0&&c<a.players.length;)a.game.actionEnd--,c++,-1===a.game.actionEnd&&(a.game.actionEnd=a.players.length-1);c=0,a.game.actionOn=a.dealer;do a.game.actionOn++,c++,a.game.actionOn===a.players.length&&(a.game.actionOn=0);while((a.players[a.game.actionOn].folded===!0||a.players[a.game.actionOn].allIn===!0)&&c<a.players.length);var d=0,e=0;for(b=0;b<a.players.length;b+=1)a.players[b].folded===!1&&d++,a.players[b].allIn===!0&&e++;d-e===1&&(a.game.actionOn=a.game.actionEnd,i(a))}function h(a){var b=!1;if(a.game.actionOn===a.game.actionEnd)b=!0,a.game.actionOn=!1;else{var c=0;do a.game.actionOn++,c++,a.game.actionOn===a.players.length&&(a.game.actionOn=0);while((a.players[a.game.actionOn].folded===!0||a.players[a.game.actionOn].allIn===!0)&&c<a.players.length)}return b}function i(a){var b,c,i,j;if(a.game&&h(a)===!0){for(b=0;b<a.game.bets.length;b+=1)a.game.pot+=parseInt(a.game.bets[b],10),a.game.roundBets[b]+=parseInt(a.game.bets[b],10);if("River"===a.game.roundName){for(console.log("effective river"),a.game.roundName="Showdown",a.game.bets.splice(0,a.game.bets.length),a.game.maxBet=0,c=0;c<a.players.length;c+=1)i=a.players[c].cards.concat(a.game.board),j=new f(i),a.players[c].hand=l(j);d(a),e(a)}else if("Turn"===a.game.roundName)console.log("effective turn"),a.game.roundName="River",a.game.deck.pop(),a.game.board.push(a.game.deck.pop()),g(a);else if("Flop"===a.game.roundName)console.log("effective flop"),a.game.roundName="Turn",a.game.deck.pop(),a.game.board.push(a.game.deck.pop()),g(a);else if("Deal"===a.game.roundName){for(console.log("effective deal"),a.game.roundName="Flop",a.game.deck.pop(),b=0;3>b;b+=1)a.game.board.push(a.game.deck.pop());g(a)}}}function j(a,b){this.smallBlind=a,this.bigBlind=b,this.pot=0,this.roundName="Deal",this.betName="bet",this.bets=[],this.roundBets=[],this.deck=[],this.board=[],this.winners="",this.winnersIndex=[],this.actionOn,this.actionStart,this.maxBet,o(this.deck)}function k(a,b){for(var c=0;c<b.players.length;c++)if(a<=b.players[c].seat)return c;return b.players.length}function l(a){var b=q(a);return a.rank=b.rank,a.message=b.message,a}function m(a,b){this.rank=a,this.message=b}function n(a,b){return b-a}function o(a){a.push("AS"),a.push("KS"),a.push("QS"),a.push("JS"),a.push("TS"),a.push("9S"),a.push("8S"),a.push("7S"),a.push("6S"),a.push("5S"),a.push("4S"),a.push("3S"),a.push("2S"),a.push("AH"),a.push("KH"),a.push("QH"),a.push("JH"),a.push("TH"),a.push("9H"),a.push("8H"),a.push("7H"),a.push("6H"),a.push("5H"),a.push("4H"),a.push("3H"),a.push("2H"),a.push("AD"),a.push("KD"),a.push("QD"),a.push("JD"),a.push("TD"),a.push("9D"),a.push("8D"),a.push("7D"),a.push("6D"),a.push("5D"),a.push("4D"),a.push("3D"),a.push("2D"),a.push("AC"),a.push("KC"),a.push("QC"),a.push("JC"),a.push("TC"),a.push("9C"),a.push("8C"),a.push("7C"),a.push("6C"),a.push("5C"),a.push("4C"),a.push("3C"),a.push("2C");var b,c,d,e;for(b=0;b<a.length;b+=1)c=Math.floor(Math.random()*(b+1)),d=a[b],e=a[c],a[b]=e,a[c]=d}function p(a,b){var c,d,e,f;for(d=0,e=[],f="",c=0;c<=a.length;c+=1)f=a.substr(c,1),"A"===f&&e.push(.2048),"K"===f&&e.push(.1024),"Q"===f&&e.push(.0512),"J"===f&&e.push(.0256),"T"===f&&e.push(.0128),"9"===f&&e.push(.0064),"8"===f&&e.push(.0032),"7"===f&&e.push(.0016),"6"===f&&e.push(8e-4),"5"===f&&e.push(4e-4),"4"===f&&e.push(2e-4),"3"===f&&e.push(1e-4),"2"===f&&e.push(0);for(e.sort(n),c=0;b>c;c+=1)d+=e[c];return d}function q(a){var b,c,d,e,f,g,h,i,j;for(b=0,c="",d=[],e=[],j=0;j<a.cards.length;j+=1)d[j]=a.cards[j].substr(0,1),e[j]=a.cards[j].substr(1,1);return f=d.sort().toString().replace(/\W/g,""),g=e.sort().toString().replace(/\W/g,""),h=a.cards.toString(),0===b&&(f.indexOf("AAAA")>-1&&(b=292+p(f.replace("AAAA",""),1)),f.indexOf("KKKK")>-1&&0===b&&(b=291+p(f.replace("KKKK",""),1)),f.indexOf("QQQQ")>-1&&0===b&&(b=290+p(f.replace("QQQQ",""),1)),f.indexOf("JJJJ")>-1&&0===b&&(b=289+p(f.replace("JJJJ",""),1)),f.indexOf("TTTT")>-1&&0===b&&(b=288+p(f.replace("TTTT",""),1)),f.indexOf("9999")>-1&&0===b&&(b=287+p(f.replace("9999",""),1)),f.indexOf("8888")>-1&&0===b&&(b=286+p(f.replace("8888",""),1)),f.indexOf("7777")>-1&&0===b&&(b=285+p(f.replace("7777",""),1)),f.indexOf("6666")>-1&&0===b&&(b=284+p(f.replace("6666",""),1)),f.indexOf("5555")>-1&&0===b&&(b=283+p(f.replace("5555",""),1)),f.indexOf("4444")>-1&&0===b&&(b=282+p(f.replace("4444",""),1)),f.indexOf("3333")>-1&&0===b&&(b=281+p(f.replace("3333",""),1)),f.indexOf("2222")>-1&&0===b&&(b=280+p(f.replace("2222",""),1)),0!==b&&(c="Four of a kind")),0===b&&(f.indexOf("AAA")>-1&&f.indexOf("KK")>-1&&(b=279),f.indexOf("AAA")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=278),f.indexOf("AAA")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=277),f.indexOf("AAA")>-1&&f.indexOf("TT")>-1&&0===b&&(b=276),f.indexOf("AAA")>-1&&f.indexOf("99")>-1&&0===b&&(b=275),f.indexOf("AAA")>-1&&f.indexOf("88")>-1&&0===b&&(b=274),f.indexOf("AAA")>-1&&f.indexOf("77")>-1&&0===b&&(b=273),f.indexOf("AAA")>-1&&f.indexOf("66")>-1&&0===b&&(b=272),f.indexOf("AAA")>-1&&f.indexOf("55")>-1&&0===b&&(b=271),f.indexOf("AAA")>-1&&f.indexOf("44")>-1&&0===b&&(b=270),f.indexOf("AAA")>-1&&f.indexOf("33")>-1&&0===b&&(b=269),f.indexOf("AAA")>-1&&f.indexOf("22")>-1&&0===b&&(b=268),f.indexOf("KKK")>-1&&f.indexOf("AA")>-1&&0===b&&(b=267),f.indexOf("KKK")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=266),f.indexOf("KKK")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=265),f.indexOf("KKK")>-1&&f.indexOf("TT")>-1&&0===b&&(b=264),f.indexOf("KKK")>-1&&f.indexOf("99")>-1&&0===b&&(b=263),f.indexOf("KKK")>-1&&f.indexOf("88")>-1&&0===b&&(b=262),f.indexOf("KKK")>-1&&f.indexOf("77")>-1&&0===b&&(b=261),f.indexOf("KKK")>-1&&f.indexOf("66")>-1&&0===b&&(b=260),f.indexOf("KKK")>-1&&f.indexOf("55")>-1&&0===b&&(b=259),f.indexOf("KKK")>-1&&f.indexOf("44")>-1&&0===b&&(b=258),f.indexOf("KKK")>-1&&f.indexOf("33")>-1&&0===b&&(b=257),f.indexOf("KKK")>-1&&f.indexOf("22")>-1&&0===b&&(b=256),f.indexOf("QQQ")>-1&&f.indexOf("AA")>-1&&0===b&&(b=255),f.indexOf("QQQ")>-1&&f.indexOf("KK")>-1&&0===b&&(b=254),f.indexOf("QQQ")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=253),f.indexOf("QQQ")>-1&&f.indexOf("TT")>-1&&0===b&&(b=252),f.indexOf("QQQ")>-1&&f.indexOf("99")>-1&&0===b&&(b=251),f.indexOf("QQQ")>-1&&f.indexOf("88")>-1&&0===b&&(b=250),f.indexOf("QQQ")>-1&&f.indexOf("77")>-1&&0===b&&(b=249),f.indexOf("QQQ")>-1&&f.indexOf("66")>-1&&0===b&&(b=248),f.indexOf("QQQ")>-1&&f.indexOf("55")>-1&&0===b&&(b=247),f.indexOf("QQQ")>-1&&f.indexOf("44")>-1&&0===b&&(b=246),f.indexOf("QQQ")>-1&&f.indexOf("33")>-1&&0===b&&(b=245),f.indexOf("QQQ")>-1&&f.indexOf("22")>-1&&0===b&&(b=244),f.indexOf("JJJ")>-1&&f.indexOf("AA")>-1&&0===b&&(b=243),f.indexOf("JJJ")>-1&&f.indexOf("KK")>-1&&0===b&&(b=242),f.indexOf("JJJ")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=241),f.indexOf("JJJ")>-1&&f.indexOf("TT")>-1&&0===b&&(b=240),f.indexOf("JJJ")>-1&&f.indexOf("99")>-1&&0===b&&(b=239),f.indexOf("JJJ")>-1&&f.indexOf("88")>-1&&0===b&&(b=238),f.indexOf("JJJ")>-1&&f.indexOf("77")>-1&&0===b&&(b=237),f.indexOf("JJJ")>-1&&f.indexOf("66")>-1&&0===b&&(b=236),f.indexOf("JJJ")>-1&&f.indexOf("55")>-1&&0===b&&(b=235),f.indexOf("JJJ")>-1&&f.indexOf("44")>-1&&0===b&&(b=234),f.indexOf("JJJ")>-1&&f.indexOf("33")>-1&&0===b&&(b=233),f.indexOf("JJJ")>-1&&f.indexOf("22")>-1&&0===b&&(b=232),f.indexOf("TTT")>-1&&f.indexOf("AA")>-1&&0===b&&(b=231),f.indexOf("TTT")>-1&&f.indexOf("KK")>-1&&0===b&&(b=230),f.indexOf("TTT")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=229),f.indexOf("TTT")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=228),f.indexOf("TTT")>-1&&f.indexOf("99")>-1&&0===b&&(b=227),f.indexOf("TTT")>-1&&f.indexOf("88")>-1&&0===b&&(b=226),f.indexOf("TTT")>-1&&f.indexOf("77")>-1&&0===b&&(b=225),f.indexOf("TTT")>-1&&f.indexOf("66")>-1&&0===b&&(b=224),f.indexOf("TTT")>-1&&f.indexOf("55")>-1&&0===b&&(b=223),f.indexOf("TTT")>-1&&f.indexOf("44")>-1&&0===b&&(b=222),f.indexOf("TTT")>-1&&f.indexOf("33")>-1&&0===b&&(b=221),f.indexOf("TTT")>-1&&f.indexOf("22")>-1&&0===b&&(b=220),f.indexOf("999")>-1&&f.indexOf("AA")>-1&&0===b&&(b=219),f.indexOf("999")>-1&&f.indexOf("KK")>-1&&0===b&&(b=218),f.indexOf("999")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=217),f.indexOf("999")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=216),f.indexOf("999")>-1&&f.indexOf("TT")>-1&&0===b&&(b=215),f.indexOf("999")>-1&&f.indexOf("88")>-1&&0===b&&(b=214),f.indexOf("999")>-1&&f.indexOf("77")>-1&&0===b&&(b=213),f.indexOf("999")>-1&&f.indexOf("66")>-1&&0===b&&(b=212),f.indexOf("999")>-1&&f.indexOf("55")>-1&&0===b&&(b=211),f.indexOf("999")>-1&&f.indexOf("44")>-1&&0===b&&(b=210),f.indexOf("999")>-1&&f.indexOf("33")>-1&&0===b&&(b=209),f.indexOf("999")>-1&&f.indexOf("22")>-1&&0===b&&(b=208),f.indexOf("888")>-1&&f.indexOf("AA")>-1&&0===b&&(b=207),f.indexOf("888")>-1&&f.indexOf("KK")>-1&&0===b&&(b=206),f.indexOf("888")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=205),f.indexOf("888")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=204),f.indexOf("888")>-1&&f.indexOf("TT")>-1&&0===b&&(b=203),f.indexOf("888")>-1&&f.indexOf("99")>-1&&0===b&&(b=202),f.indexOf("888")>-1&&f.indexOf("77")>-1&&0===b&&(b=201),f.indexOf("888")>-1&&f.indexOf("66")>-1&&0===b&&(b=200),f.indexOf("888")>-1&&f.indexOf("55")>-1&&0===b&&(b=199),f.indexOf("888")>-1&&f.indexOf("44")>-1&&0===b&&(b=198),f.indexOf("888")>-1&&f.indexOf("33")>-1&&0===b&&(b=197),f.indexOf("888")>-1&&f.indexOf("22")>-1&&0===b&&(b=196),f.indexOf("777")>-1&&f.indexOf("AA")>-1&&0===b&&(b=195),f.indexOf("777")>-1&&f.indexOf("KK")>-1&&0===b&&(b=194),f.indexOf("777")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=193),f.indexOf("777")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=192),f.indexOf("777")>-1&&f.indexOf("TT")>-1&&0===b&&(b=191),f.indexOf("777")>-1&&f.indexOf("99")>-1&&0===b&&(b=190),f.indexOf("777")>-1&&f.indexOf("88")>-1&&0===b&&(b=189),f.indexOf("777")>-1&&f.indexOf("66")>-1&&0===b&&(b=188),f.indexOf("777")>-1&&f.indexOf("55")>-1&&0===b&&(b=187),f.indexOf("777")>-1&&f.indexOf("44")>-1&&0===b&&(b=186),f.indexOf("777")>-1&&f.indexOf("33")>-1&&0===b&&(b=185),f.indexOf("777")>-1&&f.indexOf("22")>-1&&0===b&&(b=184),f.indexOf("666")>-1&&f.indexOf("AA")>-1&&0===b&&(b=183),f.indexOf("666")>-1&&f.indexOf("KK")>-1&&0===b&&(b=182),f.indexOf("666")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=181),f.indexOf("666")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=180),f.indexOf("666")>-1&&f.indexOf("TT")>-1&&0===b&&(b=179),f.indexOf("666")>-1&&f.indexOf("99")>-1&&0===b&&(b=178),f.indexOf("666")>-1&&f.indexOf("88")>-1&&0===b&&(b=177),f.indexOf("666")>-1&&f.indexOf("77")>-1&&0===b&&(b=176),f.indexOf("666")>-1&&f.indexOf("55")>-1&&0===b&&(b=175),f.indexOf("666")>-1&&f.indexOf("44")>-1&&0===b&&(b=174),f.indexOf("666")>-1&&f.indexOf("33")>-1&&0===b&&(b=173),f.indexOf("666")>-1&&f.indexOf("22")>-1&&0===b&&(b=172),f.indexOf("555")>-1&&f.indexOf("AA")>-1&&0===b&&(b=171),f.indexOf("555")>-1&&f.indexOf("KK")>-1&&0===b&&(b=170),f.indexOf("555")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=169),f.indexOf("555")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=168),f.indexOf("555")>-1&&f.indexOf("TT")>-1&&0===b&&(b=167),f.indexOf("555")>-1&&f.indexOf("99")>-1&&0===b&&(b=166),f.indexOf("555")>-1&&f.indexOf("88")>-1&&0===b&&(b=165),f.indexOf("555")>-1&&f.indexOf("77")>-1&&0===b&&(b=164),f.indexOf("555")>-1&&f.indexOf("66")>-1&&0===b&&(b=163),f.indexOf("555")>-1&&f.indexOf("44")>-1&&0===b&&(b=162),f.indexOf("555")>-1&&f.indexOf("33")>-1&&0===b&&(b=161),f.indexOf("555")>-1&&f.indexOf("22")>-1&&0===b&&(b=160),f.indexOf("444")>-1&&f.indexOf("AA")>-1&&0===b&&(b=159),f.indexOf("444")>-1&&f.indexOf("KK")>-1&&0===b&&(b=158),f.indexOf("444")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=157),f.indexOf("444")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=156),f.indexOf("444")>-1&&f.indexOf("TT")>-1&&0===b&&(b=155),f.indexOf("444")>-1&&f.indexOf("99")>-1&&0===b&&(b=154),f.indexOf("444")>-1&&f.indexOf("88")>-1&&0===b&&(b=153),f.indexOf("444")>-1&&f.indexOf("77")>-1&&0===b&&(b=152),f.indexOf("444")>-1&&f.indexOf("66")>-1&&0===b&&(b=151),f.indexOf("444")>-1&&f.indexOf("55")>-1&&0===b&&(b=150),f.indexOf("444")>-1&&f.indexOf("33")>-1&&0===b&&(b=149),f.indexOf("444")>-1&&f.indexOf("22")>-1&&0===b&&(b=148),f.indexOf("333")>-1&&f.indexOf("AA")>-1&&0===b&&(b=147),f.indexOf("333")>-1&&f.indexOf("KK")>-1&&0===b&&(b=146),f.indexOf("333")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=145),f.indexOf("333")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=144),f.indexOf("333")>-1&&f.indexOf("TT")>-1&&0===b&&(b=143),f.indexOf("333")>-1&&f.indexOf("99")>-1&&0===b&&(b=142),f.indexOf("333")>-1&&f.indexOf("88")>-1&&0===b&&(b=141),f.indexOf("333")>-1&&f.indexOf("77")>-1&&0===b&&(b=140),f.indexOf("333")>-1&&f.indexOf("66")>-1&&0===b&&(b=139),f.indexOf("333")>-1&&f.indexOf("55")>-1&&0===b&&(b=138),f.indexOf("333")>-1&&f.indexOf("44")>-1&&0===b&&(b=137),f.indexOf("333")>-1&&f.indexOf("22")>-1&&0===b&&(b=136),f.indexOf("222")>-1&&f.indexOf("AA")>-1&&0===b&&(b=135),f.indexOf("222")>-1&&f.indexOf("KK")>-1&&0===b&&(b=134),f.indexOf("222")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=133),f.indexOf("222")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=132),f.indexOf("222")>-1&&f.indexOf("TT")>-1&&0===b&&(b=131),f.indexOf("222")>-1&&f.indexOf("99")>-1&&0===b&&(b=130),f.indexOf("222")>-1&&f.indexOf("88")>-1&&0===b&&(b=129),f.indexOf("222")>-1&&f.indexOf("77")>-1&&0===b&&(b=128),f.indexOf("222")>-1&&f.indexOf("66")>-1&&0===b&&(b=127),f.indexOf("222")>-1&&f.indexOf("55")>-1&&0===b&&(b=126),f.indexOf("222")>-1&&f.indexOf("44")>-1&&0===b&&(b=125),f.indexOf("222")>-1&&f.indexOf("33")>-1&&0===b&&(b=124),0!==b&&(c="Full House")),0===b&&((g.indexOf("CCCCC")>-1||g.indexOf("DDDDD")>-1||g.indexOf("HHHHH")>-1||g.indexOf("SSSSS")>-1)&&(b=123,c="Flush"),h.indexOf("TC")>-1&&h.indexOf("JC")>-1&&h.indexOf("QC")>-1&&h.indexOf("KC")>-1&&h.indexOf("AC")>-1&&123===b&&(b=302,c="Straight Flush"),h.indexOf("TD")>-1&&h.indexOf("JD")>-1&&h.indexOf("QD")>-1&&h.indexOf("KD")>-1&&h.indexOf("AD")>-1&&123===b&&(b=302,c="Straight Flush"),h.indexOf("TH")>-1&&h.indexOf("JH")>-1&&h.indexOf("QH")>-1&&h.indexOf("KH")>-1&&h.indexOf("AH")>-1&&123===b&&(b=302,c="Straight Flush"),h.indexOf("TS")>-1&&h.indexOf("JS")>-1&&h.indexOf("QS")>-1&&h.indexOf("KS")>-1&&h.indexOf("AS")>-1&&123===b&&(b=302,c="Straight Flush"),h.indexOf("9C")>-1&&h.indexOf("TC")>-1&&h.indexOf("JC")>-1&&h.indexOf("QC")>-1&&h.indexOf("KC")>-1&&123===b&&(b=301,c="Straight Flush"),h.indexOf("9D")>-1&&h.indexOf("TD")>-1&&h.indexOf("JD")>-1&&h.indexOf("QD")>-1&&h.indexOf("KD")>-1&&123===b&&(b=301,c="Straight Flush"),h.indexOf("9H")>-1&&h.indexOf("TH")>-1&&h.indexOf("JH")>-1&&h.indexOf("QH")>-1&&h.indexOf("KH")>-1&&123===b&&(b=301,c="Straight Flush"),h.indexOf("9S")>-1&&h.indexOf("TS")>-1&&h.indexOf("JS")>-1&&h.indexOf("QS")>-1&&h.indexOf("KS")>-1&&123===b&&(b=301,c="Straight Flush"),h.indexOf("8C")>-1&&h.indexOf("9C")>-1&&h.indexOf("TC")>-1&&h.indexOf("JC")>-1&&h.indexOf("QC")>-1&&123===b&&(b=300,c="Straight Flush"),h.indexOf("8D")>-1&&h.indexOf("9D")>-1&&h.indexOf("TD")>-1&&h.indexOf("JD")>-1&&h.indexOf("QD")>-1&&123===b&&(b=300,c="Straight Flush"),h.indexOf("8H")>-1&&h.indexOf("9H")>-1&&h.indexOf("TH")>-1&&h.indexOf("JH")>-1&&h.indexOf("QH")>-1&&123===b&&(b=300,c="Straight Flush"),h.indexOf("8S")>-1&&h.indexOf("9S")>-1&&h.indexOf("TS")>-1&&h.indexOf("JS")>-1&&h.indexOf("QS")>-1&&123===b&&(b=300,c="Straight Flush"),h.indexOf("7C")>-1&&h.indexOf("8C")>-1&&h.indexOf("9C")>-1&&h.indexOf("TC")>-1&&h.indexOf("JC")>-1&&123===b&&(b=299,c="Straight Flush"),h.indexOf("7D")>-1&&h.indexOf("8D")>-1&&h.indexOf("9D")>-1&&h.indexOf("TD")>-1&&h.indexOf("JD")>-1&&123===b&&(b=299,c="Straight Flush"),h.indexOf("7H")>-1&&h.indexOf("8H")>-1&&h.indexOf("9H")>-1&&h.indexOf("TH")>-1&&h.indexOf("JH")>-1&&123===b&&(b=299,c="Straight Flush"),h.indexOf("7S")>-1&&h.indexOf("8S")>-1&&h.indexOf("9S")>-1&&h.indexOf("TS")>-1&&h.indexOf("JS")>-1&&123===b&&(b=299,c="Straight Flush"),h.indexOf("6C")>-1&&h.indexOf("7C")>-1&&h.indexOf("8C")>-1&&h.indexOf("9C")>-1&&h.indexOf("TC")>-1&&123===b&&(b=298,c="Straight Flush"),h.indexOf("6D")>-1&&h.indexOf("7D")>-1&&h.indexOf("8D")>-1&&h.indexOf("9D")>-1&&h.indexOf("TD")>-1&&123===b&&(b=298,c="Straight Flush"),h.indexOf("6H")>-1&&h.indexOf("7H")>-1&&h.indexOf("8H")>-1&&h.indexOf("9H")>-1&&h.indexOf("TH")>-1&&123===b&&(b=298,c="Straight Flush"),h.indexOf("6S")>-1&&h.indexOf("7S")>-1&&h.indexOf("8S")>-1&&h.indexOf("9S")>-1&&h.indexOf("TS")>-1&&123===b&&(b=298,c="Straight Flush"),h.indexOf("5C")>-1&&h.indexOf("6C")>-1&&h.indexOf("7C")>-1&&h.indexOf("8C")>-1&&h.indexOf("9C")>-1&&123===b&&(b=297,c="Straight Flush"),h.indexOf("5D")>-1&&h.indexOf("6D")>-1&&h.indexOf("7D")>-1&&h.indexOf("8D")>-1&&h.indexOf("9D")>-1&&123===b&&(b=297,c="Straight Flush"),h.indexOf("5H")>-1&&h.indexOf("6H")>-1&&h.indexOf("7H")>-1&&h.indexOf("8H")>-1&&h.indexOf("9H")>-1&&123===b&&(b=297,c="Straight Flush"),h.indexOf("5S")>-1&&h.indexOf("6S")>-1&&h.indexOf("7S")>-1&&h.indexOf("8S")>-1&&h.indexOf("9S")>-1&&123===b&&(b=297,c="Straight Flush"),h.indexOf("4C")>-1&&h.indexOf("5C")>-1&&h.indexOf("6C")>-1&&h.indexOf("7C")>-1&&h.indexOf("8C")>-1&&123===b&&(b=296,c="Straight Flush"),h.indexOf("4D")>-1&&h.indexOf("5D")>-1&&h.indexOf("6D")>-1&&h.indexOf("7D")>-1&&h.indexOf("8D")>-1&&123===b&&(b=296,c="Straight Flush"),h.indexOf("4H")>-1&&h.indexOf("5H")>-1&&h.indexOf("6H")>-1&&h.indexOf("7H")>-1&&h.indexOf("8H")>-1&&123===b&&(b=296,c="Straight Flush"),h.indexOf("4S")>-1&&h.indexOf("5S")>-1&&h.indexOf("6S")>-1&&h.indexOf("7S")>-1&&h.indexOf("8S")>-1&&123===b&&(b=296,c="Straight Flush"),h.indexOf("3C")>-1&&h.indexOf("4C")>-1&&h.indexOf("5C")>-1&&h.indexOf("6C")>-1&&h.indexOf("7C")>-1&&123===b&&(b=295,c="Straight Flush"),h.indexOf("3D")>-1&&h.indexOf("4D")>-1&&h.indexOf("5D")>-1&&h.indexOf("6D")>-1&&h.indexOf("7D")>-1&&123===b&&(b=295,c="Straight Flush"),h.indexOf("3H")>-1&&h.indexOf("4H")>-1&&h.indexOf("5H")>-1&&h.indexOf("6H")>-1&&h.indexOf("7H")>-1&&123===b&&(b=295,c="Straight Flush"),h.indexOf("3S")>-1&&h.indexOf("4S")>-1&&h.indexOf("5S")>-1&&h.indexOf("6S")>-1&&h.indexOf("7S")>-1&&123===b&&(b=295,c="Straight Flush"),h.indexOf("2C")>-1&&h.indexOf("3C")>-1&&h.indexOf("4C")>-1&&h.indexOf("5C")>-1&&h.indexOf("6C")>-1&&123===b&&(b=294,c="Straight Flush"),h.indexOf("2D")>-1&&h.indexOf("3D")>-1&&h.indexOf("4D")>-1&&h.indexOf("5D")>-1&&h.indexOf("6D")>-1&&123===b&&(b=294,c="Straight Flush"),h.indexOf("2H")>-1&&h.indexOf("3H")>-1&&h.indexOf("4H")>-1&&h.indexOf("5H")>-1&&h.indexOf("6H")>-1&&123===b&&(b=294,c="Straight Flush"),h.indexOf("2S")>-1&&h.indexOf("3S")>-1&&h.indexOf("4S")>-1&&h.indexOf("5S")>-1&&h.indexOf("6S")>-1&&123===b&&(b=294,c="Straight Flush"),h.indexOf("AC")>-1&&h.indexOf("2C")>-1&&h.indexOf("3C")>-1&&h.indexOf("4C")>-1&&h.indexOf("5C")>-1&&123===b&&(b=293,c="Straight Flush"),h.indexOf("AS")>-1&&h.indexOf("2S")>-1&&h.indexOf("3S")>-1&&h.indexOf("4S")>-1&&h.indexOf("5S")>-1&&123===b&&(b=293,c="Straight Flush"),h.indexOf("AH")>-1&&h.indexOf("2H")>-1&&h.indexOf("3H")>-1&&h.indexOf("4H")>-1&&h.indexOf("5H")>-1&&123===b&&(b=293,c="Straight Flush"),h.indexOf("AD")>-1&&h.indexOf("2D")>-1&&h.indexOf("3D")>-1&&h.indexOf("4D")>-1&&h.indexOf("5D")>-1&&123===b&&(b=293,c="Straight Flush"),123===b&&(b+=p(f,5))),0===b&&(h.indexOf("T")>-1&&h.indexOf("J")>-1&&h.indexOf("Q")>-1&&h.indexOf("K")>-1&&h.indexOf("A")>-1&&(b=122),h.indexOf("9")>-1&&h.indexOf("T")>-1&&h.indexOf("J")>-1&&h.indexOf("Q")>-1&&h.indexOf("K")>-1&&0===b&&(b=121),h.indexOf("8")>-1&&h.indexOf("9")>-1&&h.indexOf("T")>-1&&h.indexOf("J")>-1&&h.indexOf("Q")>-1&&0===b&&(b=120),h.indexOf("7")>-1&&h.indexOf("8")>-1&&h.indexOf("9")>-1&&h.indexOf("T")>-1&&h.indexOf("J")>-1&&0===b&&(b=119),h.indexOf("6")>-1&&h.indexOf("7")>-1&&h.indexOf("8")>-1&&h.indexOf("9")>-1&&h.indexOf("T")>-1&&0===b&&(b=118),h.indexOf("5")>-1&&h.indexOf("6")>-1&&h.indexOf("7")>-1&&h.indexOf("8")>-1&&h.indexOf("9")>-1&&0===b&&(b=117),h.indexOf("4")>-1&&h.indexOf("5")>-1&&h.indexOf("6")>-1&&h.indexOf("7")>-1&&h.indexOf("8")>-1&&0===b&&(b=116),h.indexOf("3")>-1&&h.indexOf("4")>-1&&h.indexOf("5")>-1&&h.indexOf("6")>-1&&h.indexOf("7")>-1&&0===b&&(b=115),h.indexOf("2")>-1&&h.indexOf("3")>-1&&h.indexOf("4")>-1&&h.indexOf("5")>-1&&h.indexOf("6")>-1&&0===b&&(b=114),h.indexOf("A")>-1&&h.indexOf("2")>-1&&h.indexOf("3")>-1&&h.indexOf("4")>-1&&h.indexOf("5")>-1&&0===b&&(b=113),0!==b&&(c="Straight")),0===b&&(f.indexOf("AAA")>-1&&(b=112+p(f.replace("AAA",""),2)),f.indexOf("KKK")>-1&&0===b&&(b=111+p(f.replace("KKK",""),2)),f.indexOf("QQQ")>-1&&0===b&&(b=110+p(f.replace("QQQ",""),2)),f.indexOf("JJJ")>-1&&0===b&&(b=109+p(f.replace("JJJ",""),2)),f.indexOf("TTT")>-1&&0===b&&(b=108+p(f.replace("TTT",""),2)),f.indexOf("999")>-1&&0===b&&(b=107+p(f.replace("999",""),2)),f.indexOf("888")>-1&&0===b&&(b=106+p(f.replace("888",""),2)),f.indexOf("777")>-1&&0===b&&(b=105+p(f.replace("777",""),2)),f.indexOf("666")>-1&&0===b&&(b=104+p(f.replace("666",""),2)),f.indexOf("555")>-1&&0===b&&(b=103+p(f.replace("555",""),2)),f.indexOf("444")>-1&&0===b&&(b=102+p(f.replace("444",""),2)),f.indexOf("333")>-1&&0===b&&(b=101+p(f.replace("333",""),2)),f.indexOf("222")>-1&&0===b&&(b=100+p(f.replace("222",""),2)),0!==b&&(c="Three of a Kind")),0===b&&(f.indexOf("AA")>-1&&f.indexOf("KK")>-1&&(b=99+p(f.replace("AA","").replace("KK",""),1)),f.indexOf("AA")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=98+p(f.replace("AA","").replace("QQ",""),1)),f.indexOf("AA")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=97+p(f.replace("AA","").replace("JJ",""),1)),f.indexOf("AA")>-1&&f.indexOf("TT")>-1&&0===b&&(b=96+p(f.replace("AA","").replace("TT",""),1)),f.indexOf("AA")>-1&&f.indexOf("99")>-1&&0===b&&(b=95+p(f.replace("AA","").replace("99",""),1)),f.indexOf("AA")>-1&&f.indexOf("88")>-1&&0===b&&(b=94+p(f.replace("AA","").replace("88",""),1)),f.indexOf("AA")>-1&&f.indexOf("77")>-1&&0===b&&(b=93+p(f.replace("AA","").replace("77",""),1)),f.indexOf("AA")>-1&&f.indexOf("66")>-1&&0===b&&(b=92+p(f.replace("AA","").replace("66",""),1)),f.indexOf("AA")>-1&&f.indexOf("55")>-1&&0===b&&(b=91+p(f.replace("AA","").replace("55",""),1)),f.indexOf("AA")>-1&&f.indexOf("44")>-1&&0===b&&(b=90+p(f.replace("AA","").replace("44",""),1)),f.indexOf("AA")>-1&&f.indexOf("33")>-1&&0===b&&(b=89+p(f.replace("AA","").replace("33",""),1)),f.indexOf("AA")>-1&&f.indexOf("22")>-1&&0===b&&(b=88+p(f.replace("AA","").replace("22",""),1)),f.indexOf("KK")>-1&&f.indexOf("QQ")>-1&&0===b&&(b=87+p(f.replace("KK","").replace("QQ",""),1)),f.indexOf("KK")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=86+p(f.replace("KK","").replace("JJ",""),1)),f.indexOf("KK")>-1&&f.indexOf("TT")>-1&&0===b&&(b=85+p(f.replace("KK","").replace("TT",""),1)),f.indexOf("KK")>-1&&f.indexOf("99")>-1&&0===b&&(b=84+p(f.replace("KK","").replace("99",""),1)),f.indexOf("KK")>-1&&f.indexOf("88")>-1&&0===b&&(b=83+p(f.replace("KK","").replace("88",""),1)),f.indexOf("KK")>-1&&f.indexOf("77")>-1&&0===b&&(b=82+p(f.replace("KK","").replace("77",""),1)),f.indexOf("KK")>-1&&f.indexOf("66")>-1&&0===b&&(b=81+p(f.replace("KK","").replace("66",""),1)),f.indexOf("KK")>-1&&f.indexOf("55")>-1&&0===b&&(b=80+p(f.replace("KK","").replace("55",""),1)),f.indexOf("KK")>-1&&f.indexOf("44")>-1&&0===b&&(b=79+p(f.replace("KK","").replace("44",""),1)),f.indexOf("KK")>-1&&f.indexOf("33")>-1&&0===b&&(b=78+p(f.replace("KK","").replace("33",""),1)),f.indexOf("KK")>-1&&f.indexOf("22")>-1&&0===b&&(b=77+p(f.replace("KK","").replace("22",""),1)),f.indexOf("QQ")>-1&&f.indexOf("JJ")>-1&&0===b&&(b=76+p(f.replace("QQ","").replace("JJ",""),1)),f.indexOf("QQ")>-1&&f.indexOf("TT")>-1&&0===b&&(b=75+p(f.replace("QQ","").replace("TT",""),1)),f.indexOf("QQ")>-1&&f.indexOf("99")>-1&&0===b&&(b=74+p(f.replace("QQ","").replace("99",""),1)),f.indexOf("QQ")>-1&&f.indexOf("88")>-1&&0===b&&(b=73+p(f.replace("QQ","").replace("88",""),1)),f.indexOf("QQ")>-1&&f.indexOf("77")>-1&&0===b&&(b=72+p(f.replace("QQ","").replace("77",""),1)),f.indexOf("QQ")>-1&&f.indexOf("66")>-1&&0===b&&(b=71+p(f.replace("QQ","").replace("66",""),1)),f.indexOf("QQ")>-1&&f.indexOf("55")>-1&&0===b&&(b=70+p(f.replace("QQ","").replace("55",""),1)),f.indexOf("QQ")>-1&&f.indexOf("44")>-1&&0===b&&(b=69+p(f.replace("QQ","").replace("44",""),1)),f.indexOf("QQ")>-1&&f.indexOf("33")>-1&&0===b&&(b=68+p(f.replace("QQ","").replace("33",""),1)),f.indexOf("QQ")>-1&&f.indexOf("22")>-1&&0===b&&(b=67+p(f.replace("QQ","").replace("22",""),1)),f.indexOf("JJ")>-1&&f.indexOf("TT")>-1&&0===b&&(b=66+p(f.replace("JJ","").replace("TT",""),1)),f.indexOf("JJ")>-1&&f.indexOf("99")>-1&&0===b&&(b=65+p(f.replace("JJ","").replace("99",""),1)),f.indexOf("JJ")>-1&&f.indexOf("88")>-1&&0===b&&(b=64+p(f.replace("JJ","").replace("88",""),1)),f.indexOf("JJ")>-1&&f.indexOf("77")>-1&&0===b&&(b=63+p(f.replace("JJ","").replace("77",""),1)),f.indexOf("JJ")>-1&&f.indexOf("66")>-1&&0===b&&(b=62+p(f.replace("JJ","").replace("66",""),1)),f.indexOf("JJ")>-1&&f.indexOf("55")>-1&&0===b&&(b=61+p(f.replace("JJ","").replace("55",""),1)),f.indexOf("JJ")>-1&&f.indexOf("44")>-1&&0===b&&(b=60+p(f.replace("JJ","").replace("44",""),1)),f.indexOf("JJ")>-1&&f.indexOf("33")>-1&&0===b&&(b=59+p(f.replace("JJ","").replace("33",""),1)),f.indexOf("JJ")>-1&&f.indexOf("22")>-1&&0===b&&(b=58+p(f.replace("JJ","").replace("22",""),1)),f.indexOf("TT")>-1&&f.indexOf("99")>-1&&0===b&&(b=57+p(f.replace("TT","").replace("99",""),1)),f.indexOf("TT")>-1&&f.indexOf("88")>-1&&0===b&&(b=56+p(f.replace("TT","").replace("88",""),1)),f.indexOf("TT")>-1&&f.indexOf("77")>-1&&0===b&&(b=55+p(f.replace("TT","").replace("77",""),1)),f.indexOf("TT")>-1&&f.indexOf("66")>-1&&0===b&&(b=54+p(f.replace("TT","").replace("66",""),1)),f.indexOf("TT")>-1&&f.indexOf("55")>-1&&0===b&&(b=53+p(f.replace("TT","").replace("55",""),1)),f.indexOf("TT")>-1&&f.indexOf("44")>-1&&0===b&&(b=52+p(f.replace("TT","").replace("44",""),1)),f.indexOf("TT")>-1&&f.indexOf("33")>-1&&0===b&&(b=51+p(f.replace("TT","").replace("33",""),1)),f.indexOf("TT")>-1&&f.indexOf("22")>-1&&0===b&&(b=50+p(f.replace("TT","").replace("22",""),1)),f.indexOf("99")>-1&&f.indexOf("88")>-1&&0===b&&(b=49+p(f.replace("99","").replace("88",""),1)),f.indexOf("99")>-1&&f.indexOf("77")>-1&&0===b&&(b=48+p(f.replace("99","").replace("77",""),1)),f.indexOf("99")>-1&&f.indexOf("66")>-1&&0===b&&(b=47+p(f.replace("99","").replace("66",""),1)),f.indexOf("99")>-1&&f.indexOf("55")>-1&&0===b&&(b=46+p(f.replace("99","").replace("55",""),1)),f.indexOf("99")>-1&&f.indexOf("44")>-1&&0===b&&(b=45+p(f.replace("99","").replace("44",""),1)),f.indexOf("99")>-1&&f.indexOf("33")>-1&&0===b&&(b=44+p(f.replace("99","").replace("33",""),1)),f.indexOf("99")>-1&&f.indexOf("22")>-1&&0===b&&(b=43+p(f.replace("99","").replace("22",""),1)),f.indexOf("88")>-1&&f.indexOf("77")>-1&&0===b&&(b=42+p(f.replace("88","").replace("77",""),1)),f.indexOf("88")>-1&&f.indexOf("66")>-1&&0===b&&(b=41+p(f.replace("88","").replace("66",""),1)),f.indexOf("88")>-1&&f.indexOf("55")>-1&&0===b&&(b=40+p(f.replace("88","").replace("55",""),1)),f.indexOf("88")>-1&&f.indexOf("44")>-1&&0===b&&(b=39+p(f.replace("88","").replace("44",""),1)),f.indexOf("88")>-1&&f.indexOf("33")>-1&&0===b&&(b=38+p(f.replace("88","").replace("33",""),1)),f.indexOf("88")>-1&&f.indexOf("22")>-1&&0===b&&(b=37+p(f.replace("88","").replace("22",""),1)),f.indexOf("77")>-1&&f.indexOf("66")>-1&&0===b&&(b=36+p(f.replace("77","").replace("66",""),1)),f.indexOf("77")>-1&&f.indexOf("55")>-1&&0===b&&(b=35+p(f.replace("77","").replace("55",""),1)),f.indexOf("77")>-1&&f.indexOf("44")>-1&&0===b&&(b=34+p(f.replace("77","").replace("44",""),1)),f.indexOf("77")>-1&&f.indexOf("33")>-1&&0===b&&(b=33+p(f.replace("77","").replace("33",""),1)),f.indexOf("77")>-1&&f.indexOf("22")>-1&&0===b&&(b=32+p(f.replace("77","").replace("22",""),1)),f.indexOf("66")>-1&&f.indexOf("55")>-1&&0===b&&(b=31+p(f.replace("66","").replace("55",""),1)),f.indexOf("66")>-1&&f.indexOf("44")>-1&&0===b&&(b=30+p(f.replace("66","").replace("44",""),1)),f.indexOf("66")>-1&&f.indexOf("33")>-1&&0===b&&(b=29+p(f.replace("66","").replace("33",""),1)),f.indexOf("66")>-1&&f.indexOf("22")>-1&&0===b&&(b=28+p(f.replace("66","").replace("22",""),1)),f.indexOf("55")>-1&&f.indexOf("44")>-1&&0===b&&(b=27+p(f.replace("55","").replace("44",""),1)),f.indexOf("55")>-1&&f.indexOf("33")>-1&&0===b&&(b=26+p(f.replace("55","").replace("33",""),1)),f.indexOf("55")>-1&&f.indexOf("22")>-1&&0===b&&(b=25+p(f.replace("55","").replace("22",""),1)),f.indexOf("44")>-1&&f.indexOf("33")>-1&&0===b&&(b=24+p(f.replace("44","").replace("33",""),1)),f.indexOf("44")>-1&&f.indexOf("22")>-1&&0===b&&(b=23+p(f.replace("44","").replace("22",""),1)),f.indexOf("33")>-1&&f.indexOf("22")>-1&&0===b&&(b=22+p(f.replace("33","").replace("22",""),1)),0!==b&&(c="Two Pair")),0===b&&(f.indexOf("AA")>-1&&(b=21+p(f.replace("AA",""),3)),f.indexOf("KK")>-1&&0===b&&(b=20+p(f.replace("KK",""),3)),f.indexOf("QQ")>-1&&0===b&&(b=19+p(f.replace("QQ",""),3)),f.indexOf("JJ")>-1&&0===b&&(b=18+p(f.replace("JJ",""),3)),f.indexOf("TT")>-1&&0===b&&(b=17+p(f.replace("TT",""),3)),f.indexOf("99")>-1&&0===b&&(b=16+p(f.replace("99",""),3)),f.indexOf("88")>-1&&0===b&&(b=15+p(f.replace("88",""),3)),f.indexOf("77")>-1&&0===b&&(b=14+p(f.replace("77",""),3)),f.indexOf("66")>-1&&0===b&&(b=13+p(f.replace("66",""),3)),f.indexOf("55")>-1&&0===b&&(b=12+p(f.replace("55",""),3)),f.indexOf("44")>-1&&0===b&&(b=11+p(f.replace("44",""),3)),f.indexOf("33")>-1&&0===b&&(b=10+p(f.replace("33",""),3)),f.indexOf("22")>-1&&0===b&&(b=9+p(f.replace("22",""),3)),0!==b&&(c="Pair")),0===b&&(f.indexOf("A")>-1&&(b=8+p(f.replace("A",""),4)),f.indexOf("K")>-1&&0===b&&(b=7+p(f.replace("K",""),4)),f.indexOf("Q")>-1&&0===b&&(b=6+p(f.replace("Q",""),4)),f.indexOf("J")>-1&&0===b&&(b=5+p(f.replace("J",""),4)),f.indexOf("T")>-1&&0===b&&(b=4+p(f.replace("T",""),4)),f.indexOf("9")>-1&&0===b&&(b=3+p(f.replace("9",""),4)),f.indexOf("8")>-1&&0===b&&(b=2+p(f.replace("8",""),4)),f.indexOf("7")>-1&&0===b&&(b=1+p(f.replace("7",""),4)),0!==b&&(c="High Card")),i=new m(b,c)
}return a.prototype.initNewRound=function(){if(this.players&&this.players.length>1){var a;for(this.dealer+=1,this.dealer>=this.players.length&&(this.dealer=0),this.game.pot=0,this.game.roundName="Deal",this.game.betName="bet",this.game.bets.splice(0,this.game.bets.length),this.game.deck.splice(0,this.game.deck.length),this.game.board.splice(0,this.game.board.length),a=0;a<this.players.length;a+=1)this.players[a].folded=!1,this.players[a].talked=!1,this.players[a].allIn=!1,this.players[a].cards.splice(0,this.players[a].cards.length);o(this.game.deck),this.NewRound()}else console.log("You need more players!")},a.prototype.AddPlayer=function(a,c,d,e){if(this.players.length<this.maxPlayers&&c>=this.minBuyIn&&c<=this.maxBuyIn){var f=new b(a,c,this,d,e),g=k(d,this);this.seats[d]=g,this.players.splice(g,0,f);for(var h=d+1;h<this.seats.length;h++)(this.seats[h]||0===this.seats[h])&&this.seats[h]++}},a.prototype.RemovePlayer=function(a){for(var b=0;b<this.players.length;b++)if(this.players[b].seat===a){this.seats[a]=!1,this.players.splice(b,1);for(var b=a;b<this.seats.length;b++)(this.seats[b]||0===this.seats[b])&&this.seats[b]--}},a.prototype.NewRound=function(){if(this.players.length>=this.minPlayers){var a,b,c;for(a=0;a<this.players.length;a+=1)this.players[a].cards.push(this.game.deck.pop()),this.players[a].cards.push(this.game.deck.pop()),this.game.bets[a]=0,this.game.roundBets[a]=0;return this.game.winners=" ",b=this.dealer+1,b>=this.players.length&&(b=0),c=this.dealer+2,c>=this.players.length&&(c-=this.players.length),2===this.players.length&&(b=this.dealer,c=0===this.dealer?1:0),this.players[b].chips-=this.smallBlind,this.players[c].chips-=this.bigBlind,this.game.bets[b]=this.smallBlind,this.game.bets[c]=this.bigBlind,this.game.maxBet=this.bigBlind,this.game.actionOn=this.dealer+3,this.game.actionOn>=this.players.length&&(this.game.actionOn-=this.players.length),2===this.players.length&&(this.game.actionOn=b),this.game.actionEnd=c,!0}return console.log("You need more players"),!1},b.prototype.GetChips=function(a){this.chips+=a},b.prototype.Fold=function(a){var b,c;b=k(this.seat,a),a.game.actionOn===b&&this.folded===!1&&this.allIn===!1?(c=a.game.bets[b],a.game.bets[b]=0,a.game.pot+=c,this.talked=!0,this.folded=!0,i(a)):console.log("It's not your turn")},b.prototype.Bet=function(a,b){var c,d,e=0;if(c=b.game.maxBet,a+=c,d=k(this.seat,b),b.game.actionOn===d&&this.folded===!1&&this.allIn===!1)if(this.chips>a){b.game.bets[d]=a,b.game.maxBet=a,b.players[d].chips-=a,b.players.talked=!0,b.game.actionEnd=b.game.actionOn;do b.game.actionEnd--,e++,-1===b.game.actionEnd&&(b.game.actionEnd=b.players.length-1);while((b.players[b.game.actionEnd].folded===!0||b.players[b.game.actionEnd].allIn===!0)&&e<b.players.length);i(b)}else console.log("You don't have enought chips --> ALL IN !!!"),this.AllIn();else console.log("It's not your turn")},b.prototype.Call=function(a){var b,c;b=a.game.maxBet,c=k(this.seat,a),a.game.actionOn===c&&this.folded===!1&&this.allIn===!1?this.chips>b?(this.chips+=a.game.bets[c],this.chips-=b,a.game.bets[c]=b,this.talked=!0,i(a)):(console.log("You don't have enought chips --> ALL IN !!!"),this.AllIn(a)):console.log("It's not your turn!!")},b.prototype.AllIn=function(a){var b=k(this.seat,a);this===a.players[b]&&a.game.actionOn===b&&this.allIn===!1?0!==a.players[b].chips&&(a.game.bets[b]+=a.players[b].chips,a.players[b].chips=0,this.allIn=!0,this.talked=!0):console.log("It's not your turn!"),i(a)},a}),app.directive("seat",function(){return{restrict:"E",transclude:!0,scope:{index:"@",length:"@",wager:"@"},link:function(a,b,c){function d(a){var b=312.5/Math.sqrt(Math.pow(25,2)*Math.pow(Math.sin(a),2)+Math.pow(12.5,2)*Math.pow(Math.cos(a),2));return b}var e=c.length,f=6.2831853/e,g=b,h=f*c.index;1===c.index||(2===c.index?h-=f/22:3===c.index?h+=h/10:4===c.index?h+=f/4:6===c.index?h-=f/3:7===c.index?h-=f/4:8===c.index?h+=f/5:9===c.index&&(h+=f/4)),g.css({transform:"rotate("+h+"rad) translate("+d(h)+"em) rotate("+-h+"rad)"})}}}),app.directive("modalDialog",function(){return{restrict:"E",scope:{show:"="},replace:!0,transclude:!0,link:function(a,b,c){a.dialogStyle={},c.width&&(a.dialogStyle.width=c.width),c.height&&(a.dialogStyle.height=c.height),a.hideModal=function(){a.show=!1}},template:'<div class="ng-modal" ng-show="show"><div class="ng-modal-overlay" ng-click="hideModal()"></div><div class="ng-modal-dialog" ng-style="dialogStyle"><div class="ng-modal-close" ng-click="hideModal()">X</div><div class="ng-modal-dialog-content" ng-transclude></div></div></div>'}}),app.directive("emailBox",function(){return{restrict:"E",templateUrl:"views/emailBox.html",scope:{show:"="},link:function(a){a.emails=[{from:"John",to:"me",subject:"I love angular",date:"Jan 1",body:'hello world!"'},{from:"Jack",to:"me",subject:"Angular and I are just friends",date:"Feb 15",body:"just kidding"},{from:"Ember",to:"me",subject:"I hate you Angular!",date:"Dec 8",body:"wassup dude"},{from:"Ember",to:"me",subject:"I hate you Angular!",date:"Dec 8",body:"wassup dude"},{from:"Ember",to:"me",subject:"I hate you Angular!",date:"Dec 8",body:"wassup dude"}],a.$watch("show",function(a,b){a!==b&&(a?$(".emailBox").slideDown():$(".emailBox").slideUp())}),a.isPopupVisible=!1,a.showPopup=function(b){a.isPopupVisible=!0,a.selectedEmail=b},a.closePopup=function(){a.isPopupVisible=!1},a.isComposePopupVisible=!1,a.showComposePopup=function(){a.composeEmail={},a.isComposePopupVisible=!0},a.closeComposePopup=function(){a.isComposePopupVisible=!1},a.composeEmail={},a.sendEmail=function(){a.isComposePopupVisible=!1,a.composeEmail.from="me",a.composeEmail.date=new Date,a.sentEmails.splice(0,0,a.composeEmail)},a.activeTab="inbox",a.sentEmails=[],a.forward=function(){a.isPopupVisible=!1,a.composeEmail={},angular.copy(a.selectedEmail,a.composeEmail),a.composeEmail.body="\n-------------------------------\nfrom: "+a.composeEmail.from+"\nsent: "+a.composeEmail.date+"\nto: "+a.composeEmail.to+"\nsubject: "+a.composeEmail.subject+"\n"+a.composeEmail.body,a.composeEmail.subject="FW: "+a.composeEmail.subject,a.composeEmail.to="",a.composeEmail.from="me",a.isComposePopupVisible=!0},a.reply=function(){a.isPopupVisible=!1,a.composeEmail={},angular.copy(a.selectedEmail,a.composeEmail),a.composeEmail.body="\n-------------------------------\nfrom: "+a.composeEmail.from+"\nsent: "+a.composeEmail.date+"\nto: "+a.composeEmail.to+"\nsubject: "+a.composeEmail.subject+"\n"+a.composeEmail.body,a.composeEmail.subject="RE: "+a.composeEmail.subject,a.composeEmail.to=a.composeEmail.from,a.composeEmail.from="me",a.isComposePopupVisible=!0}}}}),app.directive("leaderBoard",["$firebaseArray","FIREBASE_URL",function(a,b){return{restrict:"E",templateUrl:"views/leaderBoard.html",scope:{show:"="},link:function(c){var d=new Firebase(b+"/profile/");c.userList=a(d),c.$watch("show",function(a,b){a!==b&&(a?$(".leaderBoard").slideDown():$(".leaderBoard").slideUp())})}}}]);